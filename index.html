<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>TGA KalkPro1.0</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" href="favicon.ico">
</head>
<body>

<img src="logo.png" class="logo">

<!-- Countdown -->
<div id="release-info">Release: V1.0.1</div>
<div id="timer">Logout in: 10:00</div>

<!-- NEU: Angemeldet als -->
<div id="login-info"></div>

<!-- SEITE 1: LOGIN -->
<div class="page active" id="page-login">
    <h2>Login</h2>

    <input id="loginUser" type="email" placeholder="E-Mail">
    <input id="loginPass" type="password" placeholder="Passwort">

    <div class="error" id="loginError"></div>

    <button onclick="login()">Anmelden / Weiter</button>

    <button onclick="forgotPassword()">Passwort vergessen</button>
    <button onclick="goToChange()">Passwort ändern</button>
    <button onclick="logout()">Abmelden</button>
</div>

<!-- SEITE 2: PASSWORT ÄNDERN -->
<div class="page" id="page-change">
    <h2>Passwort ändern</h2>

    <input id="oldPass" type="password" placeholder="Altes Passwort">
    <input id="newPass1" type="password" placeholder="Neues Passwort">
    <input id="newPass2" type="password" placeholder="Neues Passwort wiederholen">

    <div class="error" id="changeError"></div>

    <button onclick="savePassword()">Speichern</button>
    <button onclick="showPage('page-login')">Abbrechen</button>
</div>

<!-- SEITE 3: AUSWAHL -->
<div class="page" id="page-3">
    <h2>Bitte auswählen</h2>

    <button onclick="showPage('page-4')">KV</button>
    <button onclick="showPage('page-5')">Anfrage an TGA</button><br>
    <button onclick="showPage('page-3-1')">Info: Der Weg zur Photovoltaikanlage</button>
  
    <p class="hint">
        KV = Kostenvoranschlag – die schnelle und direkte Ermittlung eines Richtpreises für den Kunden<br><br>
        Anfrage an TGA – Ermittlung eines Richtpreises für den Kunden, jedoch mit der Möglichkeit ein qualifiziertes Angebot von TGA per Mail anzufragen.<br>
    </p>
    <button onclick="clearInputs()">Eingaben löschen</button>
    <button onclick="showPage('page-login')">Zurück</button>
    <button id="btnExportLog" class="hidden" onclick="exportLoginLog()">Login-Log herunterladen</button>

</div>

<!-- SEITE 3.1: Info: Der Weg zur Photovoltaikanlage</button -->
<div class="page" id="page-3-1">
    <h2>Der Weg zur Photovoltaikanlage</h2>

    <div style="height:90vh; overflow:auto; border:1px solid #ccc;">
  <iframe
    src="TGA_Schema.pdf"
    style="width:100%; height:100%; border:0;"
  ></iframe>
</div>
    <button onclick="showPage('page-3')">Zurück</button>
</div>


<!-- SEITE 4: HAUPTMENÜ -->
<div class="page" id="page-4">
    <h2>Hauptmenü</h2>

    <button onclick="showPage('page-6')">DC</button>
    <button onclick="showPage('page-7')">AC</button>
    <button onclick="showPage('page-3')">Komplett</button>

<br>
<br>
<br>
<br>
<br>
<br>
<button onclick="showPage('page-3')">Zurück</button>

</div>

<!-- SEITE 5: ANFRAGE AN TGA -->
<div class="page" id="page-5">
    <h2>Anfrage an TGA</h2><br>

    <p class="hint">
        <strong>Bauvorhaben:</strong><br>
    </p>
    <div class="input-field">
        <input id="bv-contact" placeholder="Kontakt / Ansprechpartner">
    </div>
    <div class="input-field">
        <input id="bv-strasse" placeholder="Straße, Hausnummer">
    </div>
    <div class="input-field">
        <input id="bv-ort" placeholder="PLZ, Ort">
    </div>
<p class="hint">
        <strong>Kontakt SHK:</strong><br>
    </p>
    <div class="input-field">
        <input id="shk-contact" placeholder="SHK Ansprechpartner">
    </div>
    <div class="input-field">
        <input id="shk-email" type="email" placeholder="SHK E-Mail">
    </div>
    <div class="input-field">
        <input id="shk-phone" placeholder="SHK Telefon-Nr.">
    </div>
<p class="hint">
        <strong>Gewünschter Ausführungstermin:</strong><br>
    </p>
    <div class="input-field">
        <input id="execution-date" type="date" placeholder="Gewünschter Ausführungstermin">
    </div>

<p class="hint">
    <strong>Ausführung - Dachpfanne:</strong><br>
</p>
<div class="input-field">
  <select id="dachpfanne-ausfuehrung">
    <option value="" selected disabled>Auswahl</option>
    <option value="Pappdocken">Pappdocken</option>
    <option value="in Mörtel">in Mörtel</option>
    <option value="verschraubt">verschraubt</option>
    <option value="aktueller Standard">aktueller Standard</option>
    <option value="unbekannt">unbekannt</option>
  </select>
</div>

<p class="hint">
    <strong>Liegen Zeichnungen / Pläne vom Dach vor?</strong><br>
    Wenn ja: Bitte hängen Sie die Pläne der E-Mail an.<br>
    Wenn nein: Alternativ hängen Sie bitte Fotos des ganzen Daches / der gesamten Fläche der E-Mail an.<br>
</p>
<div class="input-field">
  <select id="zeichnung-plaene">
    <option value="" selected disabled>Auswahl</option>
    <option value="ja">ja</option>
    <option value="nein">nein</option>
  </select>
</div>

<p class="hint">
    <strong>Wo befindet sich der Zählerschrank?</strong><br>
    (Fotos vom geöffneten Zählerschrank der E-Mail bitte anhängen.)<br>
</p>
<div class="input-field">
        <input id="zaehlerschrank" placeholder="Standort Zählerschrank">
    </div>

<p class="hint">
   <strong>Nennen Sie bitte den Aufstellungsort von Wechselrichter und Speiher:</strong><br>
    (Fotos an der E-Mail bitte anhängen.)<br>
</p>
<div class="input-field">
        <input id="wechselrichter_speicher" placeholder="Standort Wechselrichter + Speicher">
    </div>

<p class="hint">
    <strong>Aktueller Jahresstrombedarf in kWh:</strong><br>
</p>
<div class="input-field">
        <input id="jahresstrombedarf" placeholder="kWh">
    </div>

<p class="hint">
    <strong>Strombedarf Heizsystem in kWh:</strong><br>
    (bei Umstellung auf Wärmepumpe bitte zusätzlich den voraussichtlichen Strombedarf angeben.)<br>
</p>
<div class="input-field">
        <input id="waermepumpe_strombedarf" placeholder="kWh">
    </div>

<p class="hint">
    <strong>Ist eine Wallbox angedacht?</strong><br>
</p>
<div class="input-field">
  <select id="wallbox">
    <option value="" selected disabled>Auswahl</option>
    <option value="ja - E-Auto">ja - E-Auto</option>
    <option value="ja - Plug-in Hybrid">ja - Plug-in Hybrid</option>
    <option value="nein">nein</option>
  </select>
</div>

    <div class="error" id="page5-error" style="color:darkred; margin:10px;"></div>

    <div class="button-bar">
        <button onclick="submitPage5()">Weiter</button>
        <button onclick="showPage('page-3')">Zurück</button>
    </div>
</div>

<!-- SEITE 6: MENÜ DC -->
<div class="page" id="page-6">
    <h2>Menü DC</h2>

    <!-- Auswahlbuttons untereinander -->
    <div>
        <button onclick="showPage('page-8')">Flachdach</button><br>
        <button onclick="showPage('page-9')">Schrägdach</button><br>
    </div>

    <!-- Navigationsbuttons nebeneinander -->
    <div style="margin-top:40px;">
        <button onclick="showPage('page-4')">Zurück</button>
    </div>
</div>

<!-- SEITE 7: MENÜ AC -->
<div class="page" id="page-7">
    <h2>Menü AC</h2>

    <!-- Auswahlbuttons untereinander -->
    <div>
        <button onclick="showPage('page-11')">Wechselrichter</button><br>
        <button onclick="showPage('page-10')">Speicher</button><br>
        <button onclick="showPage('page-18')">Wallbox</button><br>
        <button onclick="showPage('page-20')">Zählerschrank</button><br>
     </div>

    <!-- Navigationsbuttons nebeneinander -->
    <div style="margin-top:40px;">
        <button onclick="showPage('page-4')">Zurück</button>
        
    </div>
</div>

<!-- SEITE 14: Wechselrichter strang -->
<div class="page" id="page-14">
    <h2>Wechselrichter "strang"</h2>

    <div id="page14-content" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-11')">Zurück</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

                                                                              <!-- SEITE 14.1: AUSWAHL MARKE -->
<div class="page" id="page-14-1">
    <h2>Auswahl Marke</h2>

    <button onclick="showPage('page-14')">Handelsmarke</button>
    <button onclick="showPage('page-14-2')">Uponor</button>
    <button onclick="showPage('page-14-3')">Roth</button>

    <br><br>

    <button onclick="showPage('page-7')">Zurück</button>
</div>

                                                                              <!-- SEITE 14.3:   -->
<div class="page" id="page-14-3">

       <div id="content-14-3" class="price-table"></div>

<div class="button-bar">
                <button onclick="showPage('page-10')">Zurück</button>
                <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
               </div>
</div>

<!-- SEITE 40: KOSTENVORANSCHLAG / ANFRAGE -->
<div class="page" id="page-40">
    <h2 id="page40-title">Kostenvoranschlag</h2>

    <!-- Anfrage-Daten (nur bei Anfrage sichtbar) -->
    <div id="anfrage-daten" style="display:none; margin:20px auto; max-width:1100px; text-align:left;">
    <div class="subtitle">Anfrage-Daten</div>
    <div id="anfrage-daten-content"></div>
    <hr style="margin:20px 0;">
    </div>

    <!-- Zusammenfassung der Mengen -->
    <div id="summary-content"></div>

    <!-- Gesamtsumme / Angebotspreis -->
    <div id="angebotspreis" class="gesamt">Gesamtpreis: 0,00 €</div>
    <div id="angebotspreisRabatt" class="gesamt rabatt">
  Gesamtpreis abzgl. SHK-Rabatt (15%): 0,00 €
</div>

    <div style="text-align:center; margin-bottom:20px;">(netto, freibleibend)</div>

<div id="fraesen-hinweis-print" style="display:none; margin-top:20px; color:darkred; font-weight:600;">
  Achtung!<br>
  Bei Frässystemen können je nach Entfernung und Flächengröße zusätzliche Aufschläge anfallen.<br>
  Bitte erfragen Sie hierzu ein individuelles Angebot.
</div>


<!-- Allgemeine Hinweise aus CSV -->
    <div id="hinweise-content"></div>

<!-- Buttons -->
    <div class="button-bar">
        <button onclick="showPage('page-3')">Zurück</button>
        <button onclick="printPage40()">Drucken / speichern als PDF</button>
        <button onclick="sendMailPage40()">Senden als Text-Mail</button>
        <button onclick="sharePdf()">PDF download</button>
        <button onclick="clearInputs()">Eingaben löschen</button>
    </div>
</div>

<!-- SEITE 41: Hinweis fehlende Anfrage-Daten -->
<div class="page" id="page-41">
    <h2>Hinweis</h2>

    <p>
        Für eine Anfrage an TGA müssen zuerst die Kontaktdaten vollständig ausgefüllt werden.
    </p>

    <div class="button-bar">
        <button onclick="showPage('page-5')">Zur Anfrage</button>
        <button onclick="showPage('page-40')">KV anzeigen</button>
    </div>
</div>

<!-- SEITE 14.2: Wechselrichter "hyprid" -->
<div class="page" id="page-14-2">

    <div id="content-14-2" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-11')">Zurück</button>
        <button onclick="showPage('page-21')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>

</div>

<!-- SEITE 8: Optimierer -->
<div class="page" id="page-8">
    <h2>Optimierer</h2>

    <div id="content-8" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-6')">Zurück</button>
        <button onclick="showPage('page-20')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 18: Wallbox -->
<div class="page" id="page-18">
    <h2>Wallbox</h2>

    <div id="content-18" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-7')">Zurück</button>
        
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 20: Zählerschrank -->
<div class="page" id="page-20">
    <h2>Zählerschrank</h2>

    <div id="content-20" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-7')">Zurück</button>
        <button onclick="showPage('page-21')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 21: Zubehör -->
<div class="page" id="page-21">
    <h2>Zubehör</h2>

    <div id="content-21" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-142')">Zurück</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 22: Extras (Zählerschrank) -->
<div class="page" id="page-22">
    <h2>Extras</h2>

    <div id="content-22" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-20')">Zurück</button>
        <button onclick="direktZumAngebot()">Weiter</button>
    </div>
</div>

<!-- SEITE 9: Gerüst -->
<div class="page" id="page-9">
    <h2>Gerüst</h2>

    <div id="content-9" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-8')">Zurück</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 10: Speicher -->
<div class="page" id="page-10">
    <h2>Speicher</h2>

    <div id="content-10" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-7')">Zurück</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 11: MENÜ Wechselrichter -->
<div class="page" id="page-11">
    <h2>Menü Trockenbau</h2>

    <!-- Auswahlbuttons untereinander -->
    <div>
        <button onclick="showPage('page-14')">Typ "strang"</button><br>
        <button onclick="showPage('page-14-2')">Typ "hybrid"</button><br>
    </div>

    <!-- Navigationsbuttons nebeneinander -->
    <div style="margin-top:40px;">
        <button onclick="showPage('page-7')">Zurück</button>
    </div>
</div>

<!-- SEITE 23: Schrägdach -->
<div class="page" id="page-23">
    <h2>Schrägdach</h2>

    <div id="content-23" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-6')">Zurück</button>
        <button onclick="showPage('page-8')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 24: Flachdach -->
<div class="page" id="page-24">
    <h2>Flachdach</h2>

    <div id="content-24" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-6')">Zurück</button>
        <button onclick="showPage('page-8')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

                                                                         <!-- SEITE 25: Aufbau 25mm (XPS) -->
<div class="page" id="page-25">
    <h2>Aufbau 25mm (XPS)</h2>

    <div id="content-25" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-11')">Zurück</button>
        <button onclick="showPage('page-20')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

                                                                                <!-- SEITE 26: AUSWAHL MARKE Klett -->
<div class="page" id="page-26">
    <h2>Auswahl Marke Klettsystem</h2>

    <button onclick="showPage('page-27')">Handelsmarke</button>
    <button onclick="showPage('page-28')">Uponor</button>
    <br><br>

    <button onclick="showPage('page-7')">Zurück</button>
</div>

                                                                               <!-- SEITE 29: AUSWAHL MARKE Noppensystem -->
<div class="page" id="page-29">
    <h2>Auswahl Marke Noppensystem</h2>

    <button onclick="showPage('page-30')">Handelsmarke</button>
    <button onclick="showPage('page-31')">Uponor</button>
    <button onclick="showPage('page-32')">Roth</button>
    <br><br>

    <button onclick="showPage('page-7')">Zurück</button>
</div>

                                                                         <!-- SEITE 27: Klett Handelsmarke -->
<div class="page" id="page-27">
    <h2>Klettsystem Handelsmarke</h2>

    <div id="content-27" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-26')">Zurück</button>
        <button onclick="showPage('page-18')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

                                                                       <!-- SEITE 28: Klett Uponor -->
<div class="page" id="page-28">
    <h2>Klettsystem Uponor</h2>

    <div id="content-28" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-26')">Zurück</button>
        <button onclick="showPage('page-18')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

                                                                         <!-- SEITE 30: Noppen Handelsmarke -->
<div class="page" id="page-30">
    <h2>Noppensystem Handelsmarke</h2>

    <div id="content-30" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-29')">Zurück</button>
        <button onclick="showPage('page-18')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

                                                                             <!-- SEITE 31: Noppen Uponor -->
<div class="page" id="page-31">
    <h2>Noppensystem Uponor</h2>

    <div id="content-31" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-29')">Zurück</button>
        <button onclick="showPage('page-18')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

                                                                          <!-- SEITE 32: Noppen Roth -->
<div class="page" id="page-32">
    <h2>Noppensystem Roth</h2>

    <div id="content-32" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-29')">Zurück</button>
        <button onclick="showPage('page-18')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

                                                                          <!-- SEITE 33: Industrieboden -->
<div class="page" id="page-33">
    <h2>Industrieboden</h2>

    <div id="content-33" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-7')">Zurück</button>
        <button onclick="showPage('page-20')">Weiter</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- SEITE 13: Zählerschrank -->
<div class="page" id="page-13">
    <h2>Zählerschrank</h2>

    <div id="content-13" class="price-table"></div>

    <div class="button-bar">
        <button onclick="showPage('page-7')">Zurück</button>
        <button onclick="direktZumAngebot()">Direkt zum Angebot</button>
    </div>
</div>

<!-- Eieruhr auf Seite 40 -->
<div id="loader40" class="loader hidden">
  <div class="spinner"></div>
  <div class="loader-text">Ausgabe wird erstellt…</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script type="module" src="app.js"></script>

<script type="module" src="app.js"></script>


</body>
</html>
